function setupUI(){var t=jQuery("#navigation-toggle-link");t.click(toggleDrawer),setupScrollToContent(),setupLightbox(),setupSharing()}function setupSharing(){$sharingLinks=jQuery(".sharing-list a:not(.pinterest):not(.email)"),$sharingLinks.click(function(t){href=this.getAttribute("href"),openWindow(href,"Share"),t.preventDefault()});var t=jQuery(".sharing-list a.pinterest");t.click(function(t){faLoadingIndicator(jQuery(this),"fa-pinterest",2e3),pinterestPinIt(),t.preventDefault()})}function setupParallax(){$siteHeader=jQuery("#site-header"),$headerOverlay=jQuery("#page-header-overlay");var t=$siteHeader.not(".no-image").height(),e=0;t&&jQuery(window).scroll(function(){"full"==window.context&&window.pageTop<t&&(e=-1*Math.abs(window.pageTop/2),$siteHeader.css("background-position","center "+e+"px"),titleBottomOffset=(t-window.pageTop)/4,titleMinBottomOffset=80,opacity=titleBottomOffset/t*4+.2,opacity=opacity>1?1:opacity,$headerOverlay.css("bottom",titleBottomOffset+"px").css("opacity",opacity))})}function setupScrollToContent(){jQuery("#content-link").click(function(){var t=jQuery(this).attr("href"),e=jQuery(t).offset().top;return jQuery("body,html").animate({scrollTop:e},700),!1})}function setupReadline(){jQuery(".readline").each(function(){var t=jQuery(this),e=jQuery(this).closest("article"),n=e.offset().top,i=n+e.outerHeight(),o=400;setInterval(function(){var e=window.pageTop;if(e>=n&&i>=e){var r=Math.round((e-n)/(i-n-o)*100);t.width(r+"%")}else t.width(0)},50)})}function setupLightbox(){jQuery(".gallery").each(function(){var t=jQuery(this),e=t.attr("id"),n=t.find(".gallery-icon a").filter("[href$='.jpg'], [href$='.gif'], [href$='.png']");n.each(function(){if(""!=jQuery(this).attr("title")){$link=jQuery(this);var t=$link.find("img").attr("alt");$link.attr("title",t)}}),n.attr("data-lightbox-gallery",e),n.nivoLightbox({effect:"fadeScale"})})}function toggleDrawer(t){var e=jQuery("#control"),n=jQuery("#page");e.hasClass("open")?(e.removeClass("open"),n.unbind("click",toggleDrawer)):(e.addClass("open"),setTimeout(function(){n.bind("blick",toggleDrawer)},500)),t&&t.preventDefault()}function setupSizeContext(){setSizeContext();var t;jQuery(window).resize(function(){t=setTimeout(setSizeContext,200)})}function setSizeContext(){$body=jQuery("body"),$body.removeClass(window.context);var t=jQuery(window).width();window.context=t>640?"full":"mobile",jQuery("body").addClass(window.context)}function openWindow(t,e){var n=700,i=450,o=screen.width/2-n/2,r=screen.height/2-i/2;window.open(t,e,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height="+i+", width="+n+", left="+o+", top="+r)}function pinterestPinIt(){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("charset","UTF-8"),t.setAttribute("src","http://assets.pinterest.com/js/pinmarklet.js?r="+99999999*Math.random()),document.body.appendChild(t)}function faLoadingIndicator(t,e,n){$icon=t.find(".fa"),$icon.removeClass(e),$icon.addClass("fa-spinner").addClass("fa-spin"),setTimeout(function(){$icon.removeClass("fa-spinner").removeClass("fa-spin"),$icon.addClass(e)},n)}window.context,jQuery(function(){setupUI(),setupSizeContext()}),jQuery(window).load(function(){window.pageTop=0,$window=jQuery(window),jQuery(window).scroll(function(){window.pageTop=$window.scrollTop()}),setupParallax(),setupReadline()});